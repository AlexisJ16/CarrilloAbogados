spring:
  application:
    name: api-gateway
  cloud:
    gateway:
      discovery:
        locator:
          enabled: false
      routes:
        - id: user-service
          uri: http://user-service.carrillo-dev.svc.cluster.local:8100
          predicates:
            - Path=/api/users/**
          filters:
            - StripPrefix=1
        - id: client-service
          uri: http://client-service.carrillo-dev.svc.cluster.local:8200
          predicates:
            - Path=/api/clients/**
          filters:
            - StripPrefix=1
        - id: case-service
          uri: http://case-service.carrillo-dev.svc.cluster.local:8300
          predicates:
            - Path=/api/cases/**
          filters:
            - StripPrefix=1
        - id: document-service
          uri: http://document-service.carrillo-dev.svc.cluster.local:8500
          predicates:
            - Path=/api/documents/**
          filters:
            - StripPrefix=1
        - id: calendar-service
          uri: http://calendar-service.carrillo-dev.svc.cluster.local:8600
          predicates:
            - Path=/api/calendar/**
          filters:
            - StripPrefix=1
        - id: notification-service
          uri: http://notification-service.carrillo-dev.svc.cluster.local:8700
          predicates:
            - Path=/api/notifications/**
          filters:
            - StripPrefix=1
        - id: n8n-integration-service
          uri: http://n8n-integration-service.carrillo-dev.svc.cluster.local:8800
          predicates:
            - Path=/api/integrations/**
          filters:
            - StripPrefix=1
    kubernetes:
      discovery:
        enabled: true
        all-namespaces: false
        namespaces:
          - carrillo-dev
      config:
        enabled: true
        namespace: carrillo-dev
        sources:
          - name: api-gateway-config
  profiles:
    active: kubernetes

server:
  port: 8080

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus,metrics
  metrics:
    export:
      prometheus:
        enabled: true
  health:
    livenessState:
      enabled: true
    readinessState:
      enabled: true

logging:
  level:
    org.springframework.cloud.gateway: INFO
    org.springframework.cloud.kubernetes: DEBUG